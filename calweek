#!/usr/bin/python3

import argparse
import shlex
import subprocess

import cal

def print_dashboard():
    """Prints the dashboard"""
    events = cal.process_calcurse(
        subprocess.check_output(shlex.split("calcurse -d 7")).decode())

    arguments = [
        ["Today", "yellow"],
        ["Tomorrow", "cyan"],
        ["After tomorrow", "green"],
        ["D + 3", "dim"],
        ["D + 4", "dim"],
        ["D + 5", "dim"],
        ["D + 6", "dim"],
        ["D + 7", "dim"],
    ]

    print("")
    for i in range(len(arguments)):
        cal.pretty_print_single_day(events, cal.is_today_from_n_days_partial(i),
                                    arguments[i][0], arguments[i][1])

if __name__ == "__main__":
    # TODO: Use the time zone
    parser = argparse.ArgumentParser()
    parser.add_argument("-f", dest="full", action="store_true",
                        help="Show full descriptions")
    parser.add_argument("timezone", nargs="?", default="UTC")
    args = parser.parse_args()

    print_dashboard()
